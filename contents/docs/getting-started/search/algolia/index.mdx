---
title: Algolia DocSearch
description: Learn how to integrate Algolia DocSearch into your documentation.
date: 07-08-2025
---

<Note type="note" title="Recuired">
  To use Algolia DocSearch, you need at least DocuBook version 1.15.1 or higher.
</Note>

[Algolia DocSearch](https://docsearch.algolia.com/) provides a fast, relevant search experience for documentation sites. It powers the search in this project **(DocuBook)**. Follow this guide to integrate it into your documentation.

## Apply for DocSearch

Algolia provides `DocSearch` for open-source projects for free. To apply:

<Stepper>
  <StepperItem title="Step 1: Visit the DocSearch">
    Visit [DocSearch Application](https://docsearch.algolia.com/apply/ ) to register your application.
  </StepperItem>
  <StepperItem title="Step 2: Fill out the form with details about your documentation:">
    - Your website URL
    - The selectors for headings and content
  </StepperItem>
  <StepperItem title="Step 3: Submit your request. Once approved, Algolia will provide:">
    - Application ID
    - Search API Key
    - Index Name
    <Note type="note" title="env.local">
      Store your environment variables securely by creating a .env.local file
      ```plaintext
        NEXT_PUBLIC_ALGOLIA_DOCSEARCH_APP_ID="your_app_id"
        NEXT_PUBLIC_ALGOLIA_DOCSEARCH_API_KEY="your_api_key"
        NEXT_PUBLIC_ALGOLIA_DOCSEARCH_INDEX_NAME="your_index_name"
      ```
    </Note>
  </StepperItem>
</Stepper>

## Changes props

Open the `navbar.tsx` file and locate the `<Search />` component :

```tsx
  <Search type="algolia"/>  // change the props like this
```
<Accordion title="Hierarchy Structure" defaultOpen={true}>
    <Files>
      <Folder name="components">
        <Folder name="contexts" />
        <Folder name="markdown" />
        <Folder name="ui" />
        <File name="navbar.tsx" />
      </Folder>
    </Files>
</Accordion>

## Crawler Editor

Now we will customize the crawler to follow the hierarchy of the docs created by DocuBook :

<Stepper>
  <StepperItem title="Step 1: Dashboard Algolia">
    Visit the [Algolia DocSearch dashboard](https://dashboard.algolia.com/)
  </StepperItem>
  <StepperItem title="Step 2: Navigate to Data Sources">
    On the Algolia dashboard page, navigate to the "Data Sources" menu.
  </StepperItem>
  <StepperItem title="Step 3: In the Data Sources menu">
    Please navigate to the "Crawler" tab, where you will see a list of crawlers. Then, click on the name of the crawler you want to customize.

    <Note type="note" title="attention">
      make sure to add your domain in the `domains` tab in the crawler settings
    </Note>
  </StepperItem>
  <StepperItem title="Step 4: Editor">
    On the crawler page, open the `setup` dropdown and select `editor`.

    ![crawler editor](/images/crawler-algolia.png)
  </StepperItem>
</Stepper>

copy the entire crawler code below :

```json showLineNumbers {2-3,7,13-14}
new Crawler({
  appId: "your_appId",
  apiKey: "your_apiKey",
  rateLimit: 8,
  maxUrls: 5000,
  schedule: "on the 22 day of the month",
  startUrls: ["https://docubook.pro"], // Replace with your domain
  ignoreQueryParams: ["source", "utm_*"],
  actions: [
    {
      indexName: "docs_pages", // Make sure this name matches the one in your .env file
      pathsToMatch: [
        "https://docubook.pro/docs/**", // Replace with your domain
        "https://www.docubook.pro/docs/**", // Replace with your domain
      ],
      recordExtractor: ({ $, helpers }) => {
        // Remove navigation elements and metadata before indexing
        // This prevents "Previous/Next" and "Published on" from appearing in search results
        $("div.grid.grid-cols-1.sm\\:grid-cols-2").remove();
        $(".my-8").remove();

        return helpers.docsearch({
          recordProps: {
            lvl0: {
              selectors: "aside nav button[data-state='open'] h4",
              defaultValue: "Documentation",
            },
            lvl1: ".prose h1",
            lvl2: ".prose h2",
            lvl3: ".prose h3",
            lvl4: null,
            content: ".prose p, .prose li, .prose code, .prose table",
          },
          indexHeadings: true,
        });
      },
    },
  ],
  initialIndexSettings: {
    docs_pages: { // Make sure this name matches the one in your .env file
      distinct: true,
      attributeForDistinct: "url",
      searchableAttributes: [
        "unordered(hierarchy.lvl0)",
        "unordered(hierarchy.lvl1)",
        "unordered(hierarchy.lvl2)",
        "unordered(hierarchy.lvl3)",
        "unordered(content)",
      ],
      customRanking: [
        "desc(custom_ranking.importance)",
        "asc(custom_ranking.position)",
      ],
      attributesForFaceting: ["hierarchy.lvl0", "hierarchy.lvl1"],
    },
  },
});
```

## Vercel

If you are deploying your DocuBook project using the Vercel platform, here are the steps to bring your local environment variables to production:

![environment variables](/images/env-vercel.png)

| **key** | **value** |
| ---------------- | ---------------- |
| NEXT_PUBLIC_ALGOLIA_DOCSEARCH_APP_ID | `your_app_id` |
| NEXT_PUBLIC_ALGOLIA_DOCSEARCH_APP_KEY | `your_api_key` |
| NEXT_PUBLIC_ALGOLIA_DOCSEARCH_INDEX_NAME | `your_index_name` |

or you can import the .env.local file